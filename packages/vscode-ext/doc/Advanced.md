# é«˜çº§ç‰¹æ€§

## è·¯ç”±æ™ºèƒ½æç¤º

`sagaroute-vscode`ä¼šå¯¹`react-router`æä¾›çš„`API`ä¸­éœ€è¦ä¼ å…¥è·¯ç”±å­—ç¬¦ä¸²çš„å½¢å‚å¤„æä¾›è·¯ç”±å¯é€‰é¡¹ï¼Œä¾‹å¦‚`<Link/>`å’Œ`<Navigate/>`çš„`to`å‚æ•°ã€`useHref`å’Œ`useLinkClickHandler`çš„ç¬¬ä¸€å½¢å‚ç­‰ã€‚è·¯ç”±å¯é€‰é¡¹ä¼šåœ¨ç”¨æˆ·é”®å…¥`/`åå¼¹å‡ºã€‚å¦‚ä¸‹ğŸ‘‡æ‰€ç¤ºï¼š

![route-just-completion](./images/route-just-completion.gif)

åœ¨è·¯ç”±å¯é€‰é¡¹çš„å³ä¾§ä¼šæä¾›æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. è¯¥è·¯ç”±å¯¹åº”çš„ç»„ä»¶æ–‡ä»¶è·¯å¾„
2. è¯¥è·¯ç”±å¯¹åº”çš„ç»„ä»¶çš„æ³¨é‡Šä¿¡æ¯ï¼ˆå¦‚æœå­˜åœ¨åˆ™æ˜¾ç¤ºï¼Œå¦åˆ™ä¸æ˜¾ç¤ºï¼‰

---

é™¤æ­¤ä¹‹å¤–ï¼Œ`sagaroute-vscode`è¿˜æ”¯æŒ**ç›¸å¯¹è·¯å¾„**çš„è·¯ç”±æ™ºèƒ½æç¤ºã€‚å‡è®¾æœ‰ä»¥ä¸‹åœºæ™¯ï¼š

å½“å‰é¡¹ç›®çš„è·¯ç”±åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š

```jsx
[
  {
    path: 'form',
    children: [
      {
        path: ':type',
        element: <PagesFormType />,
      },
      {
        index: true,
        element: <PagesFormIndex />,
      },
      {
        path: 'review',
        element: <PagesFormReview />,
      },
    ],
  },
  // å…¶ä½™è·¯ç”±å¯¹è±¡çœç•¥...
];
```

å½“æˆ‘ä»¬åœ¨ä¸Šè¿°è·¯ç”±åˆ—è¡¨ä¸­çš„`<PagesFormIndex />`ç»„ä»¶å¯¹åº”çš„æ–‡ä»¶è¿›è¡Œç¼–ç ä¸”ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ—¶ï¼Œä¼šæœ‰ä»¥ä¸‹æ•ˆæœğŸ‘‡ï¼š

![route-relative-completion](./images/route-relative-completion.gif)

ä»ä¸Šè¿°æ•ˆæœå¯çœ‹å‡ºï¼š

1. å½“é”®å…¥`./`æ—¶ï¼Œä¼šç»™äºˆå½“å‰æ–‡ä»¶å¯¹åº”çš„è·¯ç”±(`/form`)å»æä¾›è·¯ç”±å¯é€‰é¡¹ï¼Œæ­¤æ—¶å‡ºç°`:type`å’Œ`review`ä¸¤ä¸ªå¯é€‰å€¼
2. å½“é”®å…¥`../`æ—¶ï¼Œç»“åˆå½“å‰æ–‡ä»¶å¯¹åº”çš„è·¯ç”±(`/form`)ç®—å‡ºæ­¤æ—¶è·¯ç”±ä¸º`/`ï¼Œå³æ ¹è·¯å¾„ï¼Œæ­¤æ—¶å‡ºç°çš„è·¯ç”±å¯é€‰å€¼ä¸ºæ•´ä¸ªè·¯ç”±åˆ—è¡¨

## è·¯ç”±è¯Šæ–­

`sagaroute-vscode`ä¼šå¯¹`react-router`æä¾›çš„`API`ï¼ˆå¦‚`Link`ã€`Navigate`ã€`useHref`ç­‰ï¼‰ä¸­ä¼ å…¥è·¯ç”±å­—ç¬¦ä¸²çš„å½¢å‚å¤„è¿›è¡Œè·¯ç”±è¯Šæ–­ï¼Œæ‰€è°“è·¯ç”±è¯Šæ–­å°±æ˜¯æŸ¥çœ‹è·¯ç”±å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…è·¯ç”±åˆ—è¡¨ä¸­çš„è·¯ç”±ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œ`sagaroute-vscode`ä¼šå¯¹è¯¥è·¯ç”±å­—ç¬¦ä¸²æ ‡é»„è­¦å‘Šæ˜¾ç¤ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![route-diagnostic-both](./images/route-diagnostic-both.gif)

ä»ä¸Šè¿°æ•ˆæœå¯çŸ¥ï¼Œè·¯ç”±è¯Šæ–­å¯¹ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„çš„è·¯ç”±éƒ½ä¼šè¿›è¡Œè¯Šæ–­ã€‚

**æ³¨æ„â—ï¼š`sagaroute-vscode`ä¸ä¼šå¯¹å¸¦å˜é‡çš„æ¨¡æ¿å­—ç¬¦ä¸²ä½œè¯Šæ–­**ï¼Œä¾‹å¦‚ï¼š

```js
// ä¸ä¼šè¯Šæ–­ï¼Œå› ä¸ºæ— æ³•åˆ¤æ–­å…¶ä¸­çš„å˜é‡çš„å€¼
navigate(`/form/${params}`);
// ä¼šè¯Šæ–­ï¼Œå› ä¸ºæ˜¯å¸¸é‡
navigate(`/form/review`);
```

å¦‚æœç”¨æˆ·æƒ³æ‰‹åŠ¨ç¦æ­¢è·¯ç”±è¯Šæ–­ï¼Œå¯é€šè¿‡æ·»åŠ `sagaroute-vscode`æä¾›çš„ä»¥ä¸‹ä¸¤ç§æ³¨é‡Šå†…å®¹å»ç¦æ­¢ï¼š

1.  `sagaroute-ignore-next-line`: ç¦æ­¢è¯¥æ³¨é‡Šçš„ä¸‹ä¸€è¡Œä»£ç çš„è·¯ç”±è¯Šæ–­ï¼Œä¾‹å¦‚ï¼š

    ```jsx
    function() {
        const navigate = useNavigate();
        /* sagaroute-ignore-next-line */
        const toPage = () => { navigate("/form/index"); };//æ­¤å¤„ä¸ä¼šè¿›è¡Œä»£ç è¯Šæ–­

        return (
            <div>
                UserPage-d
                {
                    // sagaroute-ignore-next-line
                    <Link to="../b1">toPage</Link> //æ­¤å¤„ä¸ä¼šè¿›è¡Œä»£ç è¯Šæ–­
                }
            </div>
        );
    }
    ```

2.  `sagaroute-ignore`: ç¦æ­¢å¯¹è¯¥æ³¨é‡Šä¸‹çš„æ–‡ä»¶å†…å®¹è¿›è¡Œè·¯ç”±è¯Šæ–­

## è·¯ç”±è·³è½¬

`sagaroute-vscode`ä¼šå¯¹`react-router`æä¾›çš„`API`ï¼ˆå¦‚`Link`ã€`Navigate`ã€`useHref`ç­‰ï¼‰ä¸­ä¼ å…¥è·¯ç”±å­—ç¬¦ä¸²çš„å½¢å‚å¤„æä¾›è·¯ç”±è·³è½¬åŠŸèƒ½ã€‚å½“`ctrl`+`é¼ æ ‡ç‚¹å‡»`è¯¥è·¯ç”±å­—ç¬¦ä¸²ï¼Œè€Œè¯¥è·¯ç”±å­—ç¬¦ä¸²æœ‰å¯ä»¥åŒ¹é…è·¯ç”±åˆ—è¡¨ä¸­çš„è·¯ç”±æ—¶ï¼Œ`sagaroute-vscode`ä¼šè·³è½¬åˆ°è¯¥è·¯ç”±å­—ç¬¦ä¸²å¯¹åº”çš„æ–‡ä»¶é¡µé¢ä¸Šï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![route-definition](./images/route-definition.gif)

**æ³¨æ„â—ï¼šè·¯ç”±è·³è½¬å¯¹ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„éƒ½ç”Ÿæ•ˆï¼Œä½†å¯¹å¸¦å˜é‡çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸ç”Ÿæ•ˆ**ï¼Œä¾‹å¦‚ï¼š

```js
// ä¸ä¼šè·³è½¬ï¼Œå› ä¸ºæ— æ³•åˆ¤æ–­å…¶ä¸­çš„å˜é‡çš„å€¼
navigate(`/form/${params}`);
```

## è·¯ç”±æ‚¬æµ®æ˜¾ç¤ºç»„ä»¶ä¿¡æ¯

`sagaroute-vscode`ä¼šå¯¹`react-router`æä¾›çš„`API`ï¼ˆå¦‚`Link`ã€`Navigate`ã€`useHref`ç­‰ï¼‰ä¸­ä¼ å…¥è·¯ç”±å­—ç¬¦ä¸²çš„å½¢å‚å¤„æä¾›æŸ¥çœ‹ç»„ä»¶ä¿¡æ¯åŠŸèƒ½ã€‚å½“é¼ æ ‡æ‚¬æµ®åˆ°è¯¥è·¯ç”±å­—ç¬¦ä¸²ï¼Œè€Œè¯¥è·¯ç”±å­—ç¬¦ä¸²æœ‰å¯ä»¥åŒ¹é…è·¯ç”±åˆ—è¡¨ä¸­çš„è·¯ç”±æ—¶ï¼Œ`sagaroute-vscode`ä¼šå†’æ³¡å‘ˆç°è¯¥è·¯ç”±ç»„ä»¶çš„ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![route-hover](./images/route-hover.gif)

æ‚¬æµ®å†…å®¹ä¼šæä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. è¯¥è·¯ç”±å¯¹åº”çš„ç»„ä»¶æ–‡ä»¶è·¯å¾„
2. è¯¥è·¯ç”±å¯¹åº”çš„ç»„ä»¶çš„æ³¨é‡Šä¿¡æ¯ï¼ˆå¦‚æœå­˜åœ¨åˆ™æ˜¾ç¤ºï¼Œå¦åˆ™ä¸æ˜¾ç¤ºï¼‰

**æ³¨æ„â—ï¼šè·¯ç”±è·³è½¬å¯¹ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„éƒ½ç”Ÿæ•ˆï¼Œä½†å¯¹å¸¦å˜é‡çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸ç”Ÿæ•ˆ**ï¼Œä¾‹å¦‚ï¼š

```js
// ä¸ä¼šå†’æ³¡æ˜¾ç¤ºï¼Œå› ä¸ºæ— æ³•åˆ¤æ–­å…¶ä¸­çš„å˜é‡çš„å€¼
navigate(`/form/${params}`);
```

## é€šè¿‡urlå®šä½è·¯ç”±æ–‡ä»¶

å¯é€šè¿‡`Sagaroute: parse`æŒ‡ä»¤å”¤å‡ºè¾“å…¥æ¡†ï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥è¦å®šä½çš„`url`ï¼Œ`sagaroute-vscode`ä¼šè§£æ`url`å¹¶åœ¨ç¼–è¾‘çª—å£ä¸­æ‰“å¼€è¯¥`url`å¯¹åº”çš„æ–‡ä»¶ï¼Œå¦‚ä¸‹æ•ˆæœå›¾æ‰€ç¤ºï¼š

![route-parse](./images/route-parse.gif)

å¼€å‘è€…æ— é¡»å…³å¿ƒ`url`å¯¹åº”çš„è·¯ç”±æ¨¡å¼æ˜¯`hash`è¿˜æ˜¯`browser`ï¼Œ`sagaroute-vscode`ä¼šè‡ªè¡Œåˆ¤æ–­å¤„ç†

**æ³¨æ„â—: åœ¨`vscode`é¡¹ç›®é¦–æ¬¡æ‰“å¼€æ—¶ï¼Œè¦å…ˆåšä¿å­˜æ“ä½œæˆ–è€…å¼ºåˆ¶`Sagaroute: routing`è§¦å‘è·¯ç”±åˆ—è¡¨åˆ·æ–°åï¼Œæ‰ä¼šæœ‰å¼€å¯å¿«æ·é€‰æ‹©è·¯ç”±è·¯å¾„**

## è·¯ç”±é«˜äº®

`sagaroute-vscode`ä¼šå¯¹`react-router`æä¾›çš„`API`ï¼ˆå¦‚`Link`ã€`Navigate`ã€`useHref`ç­‰ï¼‰ä¸­ä¼ å…¥è·¯ç”±å­—ç¬¦ä¸²çš„å½¢å‚å¤„è¿›è¡Œé«˜äº®æ˜¾ç¤ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![route-highlight](./images/route-highlight.png)

ç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è·¯ç”±çš„é«˜äº®æ ·å¼ï¼Œåœ¨`.vscode/settings.json`ä¸­ï¼Œæä¾›äº†`sagaroute.decoration`å»è®¾ç½®é«˜äº®æ ·å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```json
{
  "sagaroute.decoration": {
    "color": "#ad4e00", // è·¯ç”±å­—ä½“é¢œè‰²
    "backgroundColor": "#ffe7ba" // è·¯ç”±èƒŒæ™¯é¢œè‰²
  }
}
```

æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š

![route-hightlight](./images/route-highlight.gif)

**æ³¨æ„â—ï¼šè·¯ç”±è·³è½¬å¯¹å¯¹å¸¦å˜é‡çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸ç”Ÿæ•ˆ**
